var P=Object.defineProperty;var B=(n,r,s)=>r in n?P(n,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[r]=s;var g=(n,r,s)=>(B(n,typeof r!="symbol"?r+"":r,s),s);import{R as e,C as D,c as F,r as c}from"./CreateReactScript-BRBWlRTV.js";import{B as A,A as M,i as v,S as T}from"./Adminto-BQEdF9zl.js";import{M as I}from"./Modal-CYscrTZ-.js";import{I as y}from"./InputFormGroup-Bwc1l4v7.js";import{T as L}from"./TextareaFormGroup-CQXxCfbs.js";import"./server.browser-DGOuh5si.js";import{N as q}from"./Number2Currency-e57Tgsuk.js";class G extends A{constructor(){super(...arguments);g(this,"path","products")}}const O=({className:n,ribbon:r,children:s,cardStyle:m,...u})=>e.createElement("article",{className:`pricing-column ${n} mb-0`,...u},r?e.createElement("div",{className:"ribbon",style:{left:-5}},e.createElement("span",null,r)):"",e.createElement("div",{className:"card mb-0",style:m},e.createElement("div",{className:"inner-box card-body p-2"},s))),h=new G,W=({products:n=[],types:r=[],can:s})=>{const m=c.useRef(),u=c.useRef(),f=c.useRef(),d=c.useRef(),E=c.useRef(),p=c.useRef(),[w,N]=c.useState(!1),[R,b]=c.useState(n),x=t=>{t!=null&&t.id?N(!0):N(!1),u.current.value=(t==null?void 0:t.id)||null,f.current.value=(t==null?void 0:t.name)||null,d.current.value=(t==null?void 0:t.price)||null,E.current.value=(t==null?void 0:t.color)||null,p.current.value=(t==null?void 0:t.description)||null,$(m.current).modal("show")},C=async t=>{t.preventDefault();const a={id:u.current.value||void 0,name:f.current.value,price:d.current.value,color:E.current.value,description:p.current.value},o=await h.save(a);if(!o)return;$(m.current).modal("hide");const i=structuredClone(R).map(l=>l.id==o.id?o:l);i.find(l=>l.id==o.id)||i.push(o),b(i)},k=async({id:t,status:a})=>{await h.status({id:t,status:a})&&b(i=>i.map(l=>(l.id==t&&(l.status=1),l)))},S=async t=>{const{isConfirmed:a}=await T.fire({title:"Estas seguro?",text:"No podras revertir esta accion!",icon:"warning",showCancelButton:!0,confirmButtonText:"Continuar",cancelButtonText:"Cancelar"});!a||!await h.delete(t)||b(i=>i.filter(l=>l.id!=t))};return e.createElement(e.Fragment,null,e.createElement("div",{className:"row"},e.createElement("div",{className:"col-12"},e.createElement("div",{className:"card"},e.createElement("div",{className:"card-header"},e.createElement("div",{className:"float-end"},e.createElement("button",{className:"btn btn-success btn-sm",onClick:x},e.createElement("i",{className:"fa fa-plus me-1"}),"Agregar producto")),e.createElement("h4",{className:"header-title my-0"},"Lista de productos")),e.createElement("div",{className:"card-body",style:{height:"calc(100vh - 160px)",overflowY:"auto"}},e.createElement("div",{className:"row mb-4"},e.createElement("div",{className:"text-center"})),e.createElement("div",{className:"d-flex flex-wrap align-items-center justify-content-center gap-3",style:{height:"max-height"}},R.map((t,a)=>e.createElement(O,{key:a,style:{width:"300px",textDecorationLine:t.status==null&&"line-through",opacity:t.status==null&&.5},cardStyle:{border:`1px solid ${t.color}44`,backgroundColor:`${t.color}11`}},e.createElement("h4",{className:`${t.ribbon?"ms-4":""} text-center text-truncate line-clamp-2`,style:{cursor:t.color}},t.name),e.createElement("table",null,e.createElement("tbody",null,e.createElement("tr",null,e.createElement("td",{style:{width:"100%"}},e.createElement("small",{className:"mb-1",style:{overflow:"hidden",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,height:"36px"}},t.description||"- Sin descripciÃ³n -"),e.createElement("b",null,"S/. ",q(t.price))),e.createElement("td",{className:"text-end"},t.status==null?e.createElement(v,{content:"Restaurar"},e.createElement("button",{className:"btn btn-xs btn-soft-dark fas fa-trash-restore",onClick:()=>k({id:t.id,status:!1})})):e.createElement(e.Fragment,null,e.createElement(v,{content:"Editar"},e.createElement("button",{className:"btn btn-xs btn-soft-primary fa fa-pen mb-1",onClick:()=>x(t)})),e.createElement(v,{content:"Eliminar"},e.createElement("button",{className:"btn btn-xs btn-soft-danger fa fa-times",onClick:()=>S(t.id)})))))))))))))),e.createElement(I,{modalRef:m,title:w?"Editar producto":"Agregar producto",onSubmit:C,size:"sm"},e.createElement("div",{className:"row",id:"main-container"},e.createElement("input",{ref:u,type:"hidden"}),e.createElement(y,{eRef:f,label:"Producto",col:"col-12",required:!0}),e.createElement(y,{eRef:d,label:"Precio",col:"col-7",type:"number",step:.01}),e.createElement(y,{eRef:E,label:"Color",col:"col-5",type:"color"}),e.createElement(L,{eRef:p,label:"Descripcion",col:"col-12"}))))};D((n,r)=>{F(n).render(e.createElement(M,{...r,title:"Productos"},e.createElement(W,{...r})))});
