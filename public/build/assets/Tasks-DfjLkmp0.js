import{C as f,c as u,R as t,r as b}from"./CreateReactScript-BRBWlRTV.js";/* empty css                    */import{T as g}from"./TasksRest-CeL9mu1O.js";import{A as y}from"./Adminto-BQEdF9zl.js";import{T as E,D as s}from"./DxPanelButton-j7iIpq-x.js";import{R as r}from"./ReactAppend-PRxIKL2F.js";import{D as T}from"./DxBox-Bo_DC-7c.js";import{D as h}from"./Dropdown-DYE06hgK.js";import{D as x}from"./DropdownItem-B-4mh1q_.js";import"./server.browser-DGOuh5si.js";const m=new g,k=()=>{const o=b.useRef(),n={Pendiente:{icon:"mdi mdi-clock-time-eight-outline",color:"btn-danger"},"En curso":{icon:"mdi mdi-timer-sand",color:"btn-primary"},Realizado:{icon:"mdi mdi-check",color:"btn-success"}},c={Llamada:{icon:"mdi mdi-phone-forward"},Correo:{icon:"mdi mdi-email-send"},"Por hacer":{icon:"mdi mdi-clock-start"}},l={Baja:{color:"bg-light"},Media:{color:"bg-success"},Alta:{color:"bg-warning"},Urgente:{color:"bg-danger"}},d=async(a,e)=>{await m.status({id:a,status:e})&&$(o.current).dxDataGrid("instance").refresh()};return t.createElement(t.Fragment,null,t.createElement(E,{gridRef:o,title:"Tareas",rest:m,toolBar:a=>{a.unshift(s({className:"btn btn-xs btn-soft-dark",text:"Actualizar",title:"Refrescar tabla",icon:"fas fa-undo-alt",onClick:()=>$(o.current).dxDataGrid("instance").refresh()})),a.unshift(s({className:"btn btn-xs btn-soft-primary",text:"Nuevo",title:"Agregar registro",icon:"fa fa-plus",onClick:()=>onOpenModal()}))},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"status",caption:"Estado",width:"120px",cellTemplate:(a,{data:e})=>{a.attr("style","overflow: visible"),a.append(T([{height:"28px",children:t.createElement(h,{className:`btn btn-xs ${n[e.status].color} rounded-pill`,title:e.status,tippy:"Actualizar estado",icon:{icon:n[e.status].icon,color:"#ffffff"}},Object.keys(n).map((i,p)=>t.createElement(x,{key:`item-${p}`,onClick:()=>d(e.id,i)},t.createElement("i",{className:n[i].icon})," ",i)))}]))}},{dataField:"name",caption:"Titulo",dataType:"string",cellTemplate:(a,{data:e})=>{r(a,t.createElement("div",null,t.createElement("b",{className:"d-block my-0"},e.name),t.createElement("div",{className:"mb-0"},t.createElement("span",{class:"badge bg-light text-dark me-1"},t.createElement("i",{className:c[e.type].icon})," ",e.type),t.createElement("span",{class:`badge ${l[e.priority].color}`},e.priority))))}},{dataField:"type",caption:"Tipo",dataType:"string",cellTemplate:(a,{data:e})=>{a.text(e.type),a.prepend(`<i class="${c[e.type].icon} me-1"></i>`)},visible:!1},{dataField:"priority",caption:"Prioridad",dataType:"string",alignment:"center",cellTemplate:(a,{data:e})=>{r(a,t.createElement("span",{className:`badge ${l[e.priority].color}`},e.priority))},visible:!1},{dataField:"client_note.client.contact_name",caption:"Contacto asociado",cellTemplate:(a,{data:e})=>{const i=e.client_note.client;r(a,t.createElement("div",null,t.createElement("b",{className:"d-block my-0 text-truncate"},i.contact_name),t.createElement("small",null,t.createElement("i",{className:"mdi mdi-phone me-1"}),i.country_prefix||"",i.contact_phone)))}},{dataField:"ends_at",caption:"Fecha de vencimiento",cellTemplate:(a,{data:e})=>{a.text(moment(e.ends_at).format("LLL"))}}]}))};f((o,n)=>{u(o).render(t.createElement(y,{...n,title:"Tareas"},t.createElement(k,{...n})))});
