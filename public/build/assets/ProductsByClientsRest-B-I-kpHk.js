var C=Object.defineProperty;var k=(c,t,a)=>t in c?C(c,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[t]=a;var o=(c,t,a)=>(k(c,typeof t!="symbol"?t+"":t,a),a);import{m as s,R as e,G as $}from"./CreateReactScript-BRBWlRTV.js";import{B as h}from"./Adminto-BQEdF9zl.js";class O extends h{constructor(){super(...arguments);o(this,"path","client-notes");o(this,"byClient",async a=>{const{result:r}=await s.Fetch(`/api/${this.path}/client/${a}`);return(r==null?void 0:r.data)??[]})}}class f extends h{constructor(){super(...arguments);o(this,"path","clients");o(this,"get",async a=>{try{const{status:r,result:l}=await s.Fetch(`/api/${this.path}/${a}`);if(!r)throw new Error((l==null?void 0:l.message)||"Ocurrio un error inesperado");return l.data}catch(r){return s.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:r.message,type:"danger"}),null}})}}o(f,"assign",async(a,r)=>{try{const{status:l,result:n}=await s.Fetch("/api/clients/assign",{method:r?"PUT":"DELETE",body:JSON.stringify({id:a})});if(!l)throw new Error((n==null?void 0:n.message)??"Ocurrio un error inesperado");return s.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:n.message,type:"success"}),!0}catch(l){return s.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:l.message,type:"danger"}),!1}}),o(f,"clientStatus",async(a,r)=>{try{const{status:l,result:n}=await s.Fetch("/api/clients/client-status",{method:"PATCH",body:JSON.stringify({client:a,status:r})});if(!l)throw new Error((n==null?void 0:n.message)??"Ocurrio un error inesperado");return s.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:n.message,type:"success"}),!0}catch(l){return s.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:l.message,type:"danger"}),!1}});const w=({className:c,style:t,html:a})=>e.createElement("div",{className:c,style:t,dangerouslySetInnerHTML:{__html:a}}),L=({id:c,status:t,name:a,description:r,assigned:l,priority:n,type:i,onChange:p,ends_at:d})=>{const m={Pendiente:{icon:"mdi mdi-clock-time-eight-outline",color:"btn-danger"},"En curso":{icon:"mdi mdi-timer-sand",color:"btn-primary"},Realizado:{icon:"mdi mdi-check",color:"btn-success"}},b={Llamada:{icon:"mdi mdi-phone-forward"},Correo:{icon:"mdi mdi-email-send"},"Por hacer":{icon:"mdi mdi-clock-start"}},N={Baja:{color:"bg-light"},Media:{color:"bg-success"},Alta:{color:"bg-warning"},Urgente:{color:"bg-danger"}};return e.createElement("div",{className:"card border border-default mb-1"},e.createElement("div",{className:"card-body p-2"},e.createElement("blockquote",{className:"card-bodyquote mb-0"},e.createElement("div",{className:"btn-group mb-1 d-flex justify-content-between align-items-center"},e.createElement("div",null,p?e.createElement(e.Fragment,null,e.createElement("button",{className:`btn btn-xs ${m[t].color} btn-sm dropdown-toggle`,type:"button","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},e.createElement("i",{className:m[t].icon})," ",t," ",e.createElement("i",{className:"mdi mdi-chevron-down"})),e.createElement("div",{className:"dropdown-menu"},Object.keys(m).map((E,y)=>e.createElement("span",{key:`status-${y}`,className:"dropdown-item",style:{cursor:"pointer"},onClick:()=>p(c,E)},e.createElement("i",{className:m[E].icon})," ",E)))):e.createElement("span",{className:`btn btn-xs ${m[t].color} btn-sm`,style:{whiteSpace:"nowrap",cursor:"default"}},e.createElement("i",{className:m[t].icon})," ",t)),e.createElement("small",{className:"text-muted ms-1"},"vence ",moment(d).fromNow())),e.createElement("div",{className:"mb-1"},e.createElement("span",{className:"badge bg-light text-dark me-1"},e.createElement("i",{className:b[i].icon})," ",i),e.createElement("span",{className:`badge ${N[n].color}`},n)),e.createElement("h5",{className:"mt-0"},a),r&&e.createElement("small",null,e.createElement(w,{html:r}))),l&&e.createElement("small",null,e.createElement("img",{src:`//${$.APP_DOMAIN}/api/profile/thumbnail/${l.relative_id}`,alt:l.fullname,className:"img-fluid avatar-xs rounded-circle me-1"}),"Asignado a ",e.createElement("b",null,l.fullname))))},S=({id:c,type:t,name:a,process:r,description:l,created_at:n,updated_at:i,user_id:p,tasks:d,onTaskChange:m,showOptions:b=!0,session:N,onDeleteNote:E,onUpdateNote:y,status:g,manage_status:u})=>t?e.createElement("div",{className:"card border border-primary mb-2"},a&&e.createElement("div",{className:"card-header p-2 d-flex justify-content-between align-items-center"},e.createElement("h5",{className:"card-title mb-0"},r?e.createElement(e.Fragment,null,e.createElement("i",{className:"mdi mdi-timeline-text me-1"})," ",r," ",e.createElement("small",{className:"text-muted"},a)):e.createElement(e.Fragment,null,e.createElement("i",{className:`${(t==null?void 0:t.icon)??"mdi mdi-clock"} me-1`})," ",a)),b&&p==N.service_user.id&&e.createElement("div",{className:"dropdown"},e.createElement("a",{className:"dropdown-toggle arrow-none card-drop","data-bs-toggle":"dropdown","aria-expanded":"false",style:{cursor:"pointer"}},e.createElement("i",{className:"mdi mdi-dots-vertical"})),e.createElement("div",{className:"dropdown-menu dropdown-menu-end"},e.createElement("a",{className:"dropdown-item",style:{cursor:"pointer"},onClick:()=>y({id:c,type:t,name:a,description:l,tasks:d})},e.createElement("i",{className:"fa fa-pen me-1"}),"Editar"),e.createElement("a",{className:"dropdown-item",style:{cursor:"pointer"},onClick:()=>E(c)},e.createElement("i",{className:"fa fa-trash me-1"}),"Eliminar")))),e.createElement("div",{className:"card-body p-2"},l&&e.createElement("div",{className:"card-text"},e.createElement(w,{html:l})),d.length>0&&d.map((x,v)=>e.createElement(L,{key:`task-${v}`,...x,onChange:m})),(g||u)&&e.createElement("div",{className:"d-flex mb-1 gap-1"},g&&e.createElement("span",{className:"badge rounded-pill px-1",style:{paddingTop:"4px",backgroundColor:g.color}},g.name),u&&e.createElement("span",{className:"badge rounded-pill px-1",style:{paddingTop:"4px",backgroundColor:u.color}},u.name)),e.createElement("p",{className:"card-text"},e.createElement("small",{className:"text-muted"},moment(n).format("LLL")," ",i!=n&&e.createElement("span",null,"· ",e.createElement("i",null,"Editado")))))):e.createElement("div",{className:"card card-body p-2 mb-2",style:{border:"1px solid #dee2e6"}},e.createElement("p",{className:"card-text mb-0"},e.createElement("i",{className:"mdi mdi-clock me-1"}),a),e.createElement("p",{className:"card-text"},e.createElement("small",{className:"text-muted"},moment(n).format("LLL")," ",i!=n&&e.createElement("span",null,"· ",e.createElement("i",null,"Editado")))));class A extends h{constructor(){super(...arguments);o(this,"path","products-by-client");o(this,"byClient",async a=>{const{result:r}=await s.Fetch(`/api/${this.path}/client/${a}`);return(r==null?void 0:r.data)??[]})}}export{S as C,w as H,A as P,L as T,f as a,O as b};
