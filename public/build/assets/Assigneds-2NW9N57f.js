var u=Object.defineProperty;var f=(n,a,e)=>a in n?u(n,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[a]=e;var i=(n,a,e)=>(f(n,typeof a!="symbol"?a+"":a,e),e);import{m as o,R as r}from"./CreateReactScript-BRBWlRTV.js";import{i as y}from"./Adminto-BQEdF9zl.js";import{r as h}from"./server.browser-DGOuh5si.js";class l{}i(l,"paginate",async a=>{const{result:e}=await o.Fetch("/api/projects/paginate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)});return e}),i(l,"save",async a=>{try{const{status:e,result:t}=await o.Fetch("/api/projects",{method:"POST",body:JSON.stringify(a)});if(!e)throw new Error((t==null?void 0:t.message)||"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:t.message,type:"success"}),!0}catch(e){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:e.message,type:"danger"}),!1}}),i(l,"status",async({id:a,status:e})=>{try{const{status:t,result:s}=await o.Fetch("/api/projects/status",{method:"PATCH",body:JSON.stringify({id:a,status:e})});if(!t)throw new Error((s==null?void 0:s.message)??"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:s.message,type:"success"}),!0}catch(t){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:t.message,type:"danger"}),!1}}),i(l,"projectStatus",async(a,e)=>{try{const{status:t,result:s}=await o.Fetch("/api/projects/project-status",{method:"PATCH",body:JSON.stringify({project:a,status:e})});if(!t)throw new Error((s==null?void 0:s.message)??"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:s.message,type:"success"}),!0}catch(t){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:t.message,type:"danger"}),!1}}),i(l,"delete",async a=>{try{const{status:e,result:t}=await o.Fetch(`/api/projects/${a}`,{method:"DELETE"});if(!e)throw new Error((t==null?void 0:t.message)??"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:t.message,type:"success"}),!0}catch(e){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:e.message,type:"danger"}),!1}});class g{}i(g,"getUser",async a=>{const{result:e}=await o.Fetch(`/api/users-by-projects/${a}`);return(e==null?void 0:e.data)??null}),i(g,"byProject",async a=>{const{result:e}=await o.Fetch(`/api/users-by-projects/project/${a}`);return(e==null?void 0:e.data)??[]}),i(g,"massiveByProject",async a=>{try{const{status:e,result:t}=await o.Fetch("/api/users-by-projects/project",{method:"PATCH",body:JSON.stringify(a)});if(!e)throw new Error((t==null?void 0:t.message)||"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:t.message,type:"success"}),!0}catch(e){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:e.message,type:"danger"}),!1}});const v=(n,a)=>{const e=moment(n),t=moment(a),s=moment();let m=r.createElement(r.Fragment,null);if(s.isBefore(e)){const c=s.diff(e,"hours")>12?e.format("LL"):e.fromNow();m=r.createElement("i",{className:"text-muted"},"Empieza ",c)}else if(s.isAfter(t)){const c=s.diff(t,"hours")>12?t.format("LL"):t.fromNow();m=r.createElement("i",{className:"text-muted"},"Finalizo ",c)}else{const d=t.diff(e),p=s.diff(e)/d*100;m=r.createElement("div",{style:{width:"200px"}},r.createElement("p",{className:"mb-0 d-flex justify-content-between"},r.createElement("span",null,moment(n).format("DD MMM YYYY")),r.createElement("span",{className:"float-end"},moment(a).format("DD MMM YYYY"))),r.createElement("div",{className:"progress progress-bar-alt-primary progress-xl mb-0 mt-0"},r.createElement("div",{className:"progress-bar progress-bar-primary progress-bar-animated",role:"progressbar","aria-valuenow":"75","aria-valuemin":"0","aria-valuemax":"100",style:{width:`${p}%`}},p.toFixed(2),"%")))}return m},x=n=>r.createElement("div",{className:"avatar-group m-0"},n.map(a=>r.createElement(y,{key:`user-${a}`,content:"Cargando...",allowHTML:!0,onShow:async e=>{const t=await g.getUser(a),s=moment(t.created_at),c=moment().diff(s,"hours")>12?s.format("lll"):s.fromNow();$(e.popper).find(".tippy-content").addClass("p-0"),e.setContent(h(r.createElement("div",{className:"card mb-0",style:{boxShadow:"0 0 10px rgba(0, 0, 0, 0.25)"}},r.createElement("div",{className:"card-body widget-user p-2"},r.createElement("div",{className:"d-flex align-items-center"},r.createElement("div",{className:"avatar-lg me-3 flex-shrink-0"},r.createElement("img",{src:`/api/profile/thumbnail/${a}`,className:"img-fluid rounded-circle",alt:"user"})),r.createElement("div",{className:"flex-grow-1 overflow-hidden"},r.createElement("h5",{className:"text-blue mt-0 mb-1"}," ",t.name," ",t.lastname),r.createElement("p",{className:"text-dark mb-1 font-13 text-truncate"},t.email),r.createElement("small",{className:"text-muted"},"Asignado: ",r.createElement("b",null,c))))))))}},r.createElement("img",{className:"avatar-group-item avatar-xs rounded-circle mb-0",src:`/api/profile/thumbnail/${a}`,style:{backdropFilter:"blur(40px)",marginRight:"6px"}}))));export{x as A,v as D,l as P,g as U};
