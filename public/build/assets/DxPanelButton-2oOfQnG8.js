import{r as C,R as e}from"./CreateReactScript-CVY3HzKt.js";import{r as z}from"./server.browser-BDv8EdO-.js";const P=({gridRef:a,rest:s,columns:c,toolBar:u,masterDetail:d,filterValue:m,defaultRows:r,selection:o,allowedPageSizes:g=[5,10,25,50,100],pageSize:f=100,exportable:x,exportableName:h,customizeCell:b=()=>{},reloadWith:v=[null]})=>(C.useEffect(()=>{var E,y,D;DevExpress.localization.locale(navigator.language),$(a.current).data("dxDataGrid")&&((y=(E=$(a.current))==null?void 0:E.dxDataGrid("instance"))==null||y.dispose()),$(a.current).dxDataGrid({language:"es",dataSource:{load:async n=>{const t=await s.paginate(n)??{};let l=(t==null?void 0:t.data)||[];if(r){const i=r.map(w=>Object.keys(w)),S=l.concat(r.filter(w=>!l.some(k=>i.some(B=>B.every(N=>k[N]==w[N])))));t.data=S}return t}},onToolbarPreparing:n=>{const{items:t}=n.toolbarOptions;u(t)},remoteOperations:!0,columnResizingMode:"widget",allowColumnResizing:!0,allowColumnReordering:!0,columnAutoWidth:!0,scrollbars:"auto",filterPanel:{visible:!0},searchPanel:{visible:!0},headerFilter:{visible:!0,search:{enabled:!0}},height:"calc(100vh - 185px)",filterValue:m,selection:o,export:{enabled:x},onExporting:function(n){var t=new ExcelJS.Workbook,l=t.addWorksheet("Main sheet");DevExpress.excelExporter.exportDataGrid({worksheet:l,component:n.component,customizeCell:function(i){b(i),i.excelCell.alignment={horizontal:"left",vertical:"top",...i.excelCell.alignment}}}).then(function(){t.xlsx.writeBuffer().then(function(i){saveAs(new Blob([i],{type:"application/octet-stream"}),`${h}.xlsx`)})})},rowAlternationEnabled:!0,showBorders:!0,filterRow:{visible:!0,applyFilter:"auto"},filterBuilderPopup:{visible:!1,position:{of:window,at:"top",my:"top",offset:{y:10}}},paging:{pageSize:f},pager:{visible:!0,allowedPageSizes:g,showPageSizeSelector:!0,showInfo:!0,showNavigationButtons:!0},allowFiltering:!0,scrolling:{mode:"standard",useNative:!0,preloadEnabled:!0,rowRenderingMode:"standard"},columnChooser:{title:"Mostrar/Ocultar columnas",enabled:!0,mode:"select",search:{enabled:!0}},columns:c,masterDetail:d,onContentReady:(...n)=>{tippy(".tippy-here",{arrow:!0,animation:"scale"})},onOptionChanged:n=>{if(n.fullName==="filterValue"){const t=location.pathname,l=Local.get("dxSettings")||{};l[t]={filterValue:n.value},Local.set("dxSettings",l)}}}).dxDataGrid("instance"),tippy(".dx-button",{arrow:!0});const p=Local.get("dxSettings")||{};(D=p[location.pathname])!=null&&D.filterValue&&$(a.current).dxDataGrid("instance").option("filterValue",p[location.pathname].filterValue)},v),e.createElement("div",{ref:a})),F=({title:a,gridRef:s,rest:c,columns:u,toolBar:d,masterDetail:m,filterValue:r=[],defaultRows:o,selection:g,className:f="",allowedPageSizes:x,pageSize:h,exportable:b=!1,customizeCell:v,reloadWith:p})=>e.createElement("div",{className:`row ${f}`},e.createElement("div",{className:"col-12"},e.createElement("div",{className:"card"},e.createElement("div",{className:"card-body"},e.createElement("h4",{className:"header-title"},e.createElement("div",{id:"header-title-options",className:"float-end"}),e.createElement("span",{id:"header-title-prefix"})," Lista de ",a," ",e.createElement("span",{id:"header-title-suffix"})),e.createElement(P,{gridRef:s,rest:c,columns:u.filter(Boolean),toolBar:d,masterDetail:m,filterValue:r,defaultRows:o,selection:g,allowedPageSizes:x,pageSize:h,exportable:b,exportableName:a,customizeCell:v,reloadWith:p}))))),L=({className:a="btn btn-xs btn-default rounded-pill",location:s="after",icon:c,text:u,title:d,onClick:m=()=>{}})=>({widget:"dxButton",location:s,options:{icon:c,text:u,hint:d,onClick:m,template:(r,o)=>{o.parent().attr("style","border: none !important; background: transparent !important"),o.attr("class",a),o.html(z(e.createElement(e.Fragment,null,r.icon&&e.createElement("i",{className:`${r.icon}`}),e.createElement("span",{className:"d-none d-md-inline-block ms-1"},r.text))))}}});export{L as D,F as T};
