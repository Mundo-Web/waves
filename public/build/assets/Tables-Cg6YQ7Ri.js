var x=Object.defineProperty;var w=(o,t,a)=>t in o?x(o,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[t]=a;var d=(o,t,a)=>(w(o,typeof t!="symbol"?t+"":t,a),a);import{m as i,C as T,c as R,R as s,r as u}from"./CreateReactScript-CVY3HzKt.js";import{R as c}from"./ReactAppend-CDtf6x3y.js";import{A as C}from"./Adminto-CFuhAGWx.js";import{M as S}from"./Modal-CBdtmnYV.js";import{T as D,D as g}from"./DxPanelButton-iWpIUwKx.js";import{I as F}from"./InputFormGroup-CgbdyySZ.js";import{T as k}from"./TextareaFormGroup-prMXhYrp.js";import{T as f}from"./TippyButton-CnFim1Gl.js";import"./server.browser-BDv8EdO-.js";class m{}d(m,"paginate",async t=>{const{result:a}=await i.Fetch("/api/tables/paginate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});return a}),d(m,"save",async t=>{try{const{status:a,result:r}=await i.Fetch("/api/tables",{method:"POST",body:JSON.stringify(t)});if(!a)throw new Error((r==null?void 0:r.message)||"Ocurrio un error inesperado");return i.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:r.message,type:"success"}),!0}catch(a){return i.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:a.message,type:"danger"}),!1}}),d(m,"status",async({id:t,status:a})=>{try{const{status:r,result:l}=await i.Fetch("/api/tables/status",{method:"PATCH",body:JSON.stringify({id:t,status:a})});if(!r)throw new Error((l==null?void 0:l.message)??"Ocurrio un error inesperado");return i.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:l.message,type:"success"}),!0}catch(r){return i.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:r.message,type:"danger"}),!1}}),d(m,"delete",async t=>{try{const{status:a,result:r}=await i.Fetch(`/api/tables/${t}`,{method:"DELETE"});if(!a)throw new Error((r==null?void 0:r.message)??"Ocurrio un error inesperado");return i.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:r.message,type:"success"}),!0}catch(a){return i.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:a.message,type:"danger"}),!1}});const O=()=>{const o=u.useRef(),t=u.useRef(),a=u.useRef(),r=u.useRef(),l=u.useRef(),[b,p]=u.useState(!1),y=e=>{e!=null&&e.id?p(!0):p(!1),a.current.value=(e==null?void 0:e.id)||null,r.current.value=(e==null?void 0:e.name)||null,l.current.value=(e==null?void 0:e.description)||null,$(t.current).modal("show")},E=async e=>{e.preventDefault();const n={id:a.current.value||void 0,name:r.current.value,description:l.current.value};await m.save(n)&&($(o.current).dxDataGrid("instance").refresh(),$(t.current).modal("hide"))},h=async({id:e,status:n})=>{await m.status({id:e,status:n})&&$(o.current).dxDataGrid("instance").refresh()},N=async e=>{await m.delete(e)&&$(o.current).dxDataGrid("instance").refresh()};return s.createElement(s.Fragment,null,s.createElement(D,{gridRef:o,title:"Tablas",rest:m,toolBar:e=>{e.unshift(g({className:"btn btn-xs btn-soft-dark",text:"Actualizar",title:"Refrescar tabla",icon:"fas fa-undo-alt",onClick:()=>$(o.current).dxDataGrid("instance").refresh()})),e.unshift(g({className:"btn btn-xs btn-soft-primary",text:"Nuevo",title:"Agregar registro",icon:"fa fa-plus",onClick:()=>onOpenModal()}))},columns:[{dataField:"id",caption:"ID",dataType:"number",sortOrder:"asc"},{dataField:"name",caption:"Tipo"},{dataField:"description",caption:"Descripcion",cellTemplate:(e,{value:n})=>{n?c(e,n):c(e,s.createElement("i",{className:"text-muted"},"- Sin descripcion -"))}},{dataField:"status",caption:"Estado",dataType:"boolean",cellTemplate:(e,{data:n})=>{switch(n.status){case 1:c(e,s.createElement("span",{className:"badge bg-success rounded-pill"},"Activo"));break;case 0:c(e,s.createElement("span",{className:"badge bg-danger rounded-pill"},"Inactivo"));break;default:c(e,s.createElement("span",{className:"badge bg-dark rounded-pill"},"Eliminado"));break}}},{caption:"Acciones",cellTemplate:(e,{data:n})=>{e.attr("style","display: flex; gap: 4px; overflow: unset"),c(e,s.createElement(f,{className:"btn btn-xs btn-soft-primary",title:"Editar",onClick:()=>y(n)},s.createElement("i",{className:"fa fa-pen"}))),c(e,s.createElement(f,{className:"btn btn-xs btn-light",title:n.status===null?"Restaurar":"Cambiar estado",onClick:()=>h(n)},n.status===1?s.createElement("i",{className:"fa fa-toggle-on text-success"}):n.status===0?s.createElement("i",{className:"fa fa-toggle-off text-danger"}):s.createElement("i",{className:"fas fa-trash-restore"}))),c(e,s.createElement(f,{className:"btn btn-xs btn-soft-danger",title:"Eliminar",onClick:()=>N(n.id)},s.createElement("i",{className:"fa fa-trash-alt"})))},allowFiltering:!1,allowExporting:!1}]}),s.createElement(S,{modalRef:t,title:b?"Editar tabla":"Agregar tabla",onSubmit:E,size:"sm"},s.createElement("div",{className:"row"},s.createElement("input",{ref:a,type:"hidden"}),s.createElement(F,{eRef:r,label:"Tabla",col:"col-12",required:!0}),s.createElement(k,{eRef:l,label:"Descripcion",col:"col-12"}))))};T((o,t)=>{R(o).render(s.createElement(C,{...t,title:"Tablas"},s.createElement(O,{...t})))});
