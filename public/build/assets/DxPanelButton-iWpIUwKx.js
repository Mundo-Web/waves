import{r as P,m as O,R as e}from"./CreateReactScript-CVY3HzKt.js";import{r as V}from"./server.browser-BDv8EdO-.js";const F=({gridRef:t,rest:s,columns:c,toolBar:d,masterDetail:u,filterValue:m,defaultRows:a,selection:l,allowedPageSizes:g=[5,10,25,50,100],pageSize:f=100,exportable:x,exportableName:b,customizeCell:h=()=>{},reloadWith:v=[null]})=>(P.useEffect(()=>{var w,y,D;DevExpress.localization.locale(navigator.language),$(t.current).data("dxDataGrid")&&((y=(w=$(t.current))==null?void 0:w.dxDataGrid("instance"))==null||y.dispose()),$(t.current).dxDataGrid({language:"es",dataSource:{load:async r=>{const{status:o,message:i,data:n,totalCount:S}=await s.paginate(r)??{};if(o!=200)return O.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:i,type:"danger"}),{data:[],totalCount:0};let N=n||[];if(a){const k=a.map(E=>Object.keys(E));n=N.concat(a.filter(E=>!N.some(B=>k.some(z=>z.every(C=>B[C]==E[C])))))}return{data:n,totalCount:S}}},onToolbarPreparing:r=>{const{items:o}=r.toolbarOptions;d(o)},remoteOperations:!0,columnResizingMode:"widget",allowColumnResizing:!0,allowColumnReordering:!0,columnAutoWidth:!0,scrollbars:"auto",filterPanel:{visible:!0},searchPanel:{visible:!0},headerFilter:{visible:!0,search:{enabled:!0}},height:"calc(100vh - 185px)",filterValue:m,selection:l,export:{enabled:x},onExporting:function(r){var o=new ExcelJS.Workbook,i=o.addWorksheet("Main sheet");DevExpress.excelExporter.exportDataGrid({worksheet:i,component:r.component,customizeCell:function(n){h(n),n.excelCell.alignment={horizontal:"left",vertical:"top",...n.excelCell.alignment}}}).then(function(){o.xlsx.writeBuffer().then(function(n){saveAs(new Blob([n],{type:"application/octet-stream"}),`${b}.xlsx`)})})},rowAlternationEnabled:!0,showBorders:!0,filterRow:{visible:!0,applyFilter:"auto"},filterBuilderPopup:{visible:!1,position:{of:window,at:"top",my:"top",offset:{y:10}}},paging:{pageSize:f},pager:{visible:!0,allowedPageSizes:g,showPageSizeSelector:!0,showInfo:!0,showNavigationButtons:!0},allowFiltering:!0,scrolling:{mode:"standard",useNative:!0,preloadEnabled:!0,rowRenderingMode:"standard"},columnChooser:{title:"Mostrar/Ocultar columnas",enabled:!0,mode:"select",search:{enabled:!0}},columns:c,masterDetail:u,onContentReady:(...r)=>{tippy(".tippy-here",{arrow:!0,animation:"scale"})},onOptionChanged:r=>{if(r.fullName==="filterValue"){const o=location.pathname,i=Local.get("dxSettings")||{};i[o]={filterValue:r.value},Local.set("dxSettings",i)}}}).dxDataGrid("instance"),tippy(".dx-button",{arrow:!0});const p=Local.get("dxSettings")||{};(D=p[location.pathname])!=null&&D.filterValue&&$(t.current).dxDataGrid("instance").option("filterValue",p[location.pathname].filterValue)},v),e.createElement("div",{ref:t})),A=({title:t,gridRef:s,rest:c,columns:d,toolBar:u,masterDetail:m,filterValue:a=[],defaultRows:l,selection:g,className:f="",allowedPageSizes:x,pageSize:b,exportable:h=!1,customizeCell:v,reloadWith:p})=>e.createElement("div",{className:`row ${f}`},e.createElement("div",{className:"col-12"},e.createElement("div",{className:"card"},e.createElement("div",{className:"card-body"},e.createElement("h4",{className:"header-title"},e.createElement("div",{id:"header-title-options",className:"float-end"}),e.createElement("span",{id:"header-title-prefix"})," Lista de ",t," ",e.createElement("span",{id:"header-title-suffix"})),e.createElement(F,{gridRef:s,rest:c,columns:d.filter(Boolean),toolBar:u,masterDetail:m,filterValue:a,defaultRows:l,selection:g,allowedPageSizes:x,pageSize:b,exportable:h,exportableName:t,customizeCell:v,reloadWith:p}))))),G=({className:t="btn btn-xs btn-default rounded-pill",location:s="after",icon:c,text:d,title:u,onClick:m=()=>{}})=>({widget:"dxButton",location:s,options:{icon:c,text:d,hint:u,onClick:m,template:(a,l)=>{l.parent().attr("style","border: none !important; background: transparent !important"),l.attr("class",t),l.html(V(e.createElement(e.Fragment,null,a.icon&&e.createElement("i",{className:`${a.icon}`}),e.createElement("span",{className:"d-none d-md-inline-block ms-1"},a.text))))}}});export{G as D,A as T};
